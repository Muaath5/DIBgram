(this.webpackJsonpdibgram=this.webpackJsonpdibgram||[]).push([[0],{32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(12),i=n.n(r),o=n(2),c=n.n(o),u=n(7),l=n(3),d=n(4),h=n(6),p=n(5),j=n(8),b=n(14),v=n(18),f=n.n(v);Array.prototype.remove=function(e){for(var t=0;t<this.length;t++)this[t]===e&&this.splice(t,1)};Array.prototype.remove;var O=Object(b.a)("tdClient"),y=Object(b.a)("updateHandlers"),m=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"initializeTdLib",value:function(){var t=Object(u.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log,Object(j.a)(e,O)[O]=new f.a({useDatabase:!0,onUpdate:function(t){n.log_updates&&console.log("Update: ",t),Object(j.a)(e,y)[y][t["@type"]]&&Object(j.a)(e,y)[y][t["@type"]].forEach((function(e){return e(t)}))}}),t.next=4,e.sendQuery({"@type":"getAuthorizationState"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"registerUpdateHandler",value:function(t,n){void 0===Object(j.a)(e,y)[y][t]&&(Object(j.a)(e,y)[y][t]=[]),Object(j.a)(e,y)[y][t].push(n)}},{key:"unRegisterUpdateHandler",value:function(t,n){void 0!==Object(j.a)(e,y)[y][t]&&Object(j.a)(e,y)[y].remove(n)}},{key:"sendQuery",value:function(t){return{use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log.log_queries&&console.log("Query: ",t),Object(j.a)(e,O)[O].send(t)}}]),e}();Object.defineProperty(m,O,{writable:!0,value:void 0}),Object.defineProperty(m,y,{writable:!0,value:{}}),m.registerUpdateHandler("updateAuthorizationState",(function(e){var t={api_id:3022678,api_hash:"d7b7676a82906a6182f4a5e5e9555673"},n=e.authorization_state;"authorizationStateWaitEncryptionKey"===n["@type"]&&m.sendQuery({"@type":"checkDatabaseEncryptionKey",encryption_key:""}),"authorizationStateWaitTdlibParameters"===n["@type"]&&m.sendQuery({"@type":"setTdlibParameters",parameters:{database_directory:"tdlib",use_message_database:!0,use_secret_chats:!0,api_id:t.api_id,api_hash:t.api_hash,system_language_code:"en",device_model:"Web",application_version:"0.0.1",enable_storage_optimizer:!0,use_test_dc:!1}})}));var g=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"givePhoneNumber",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sendQuery({"@type":"setAuthenticationPhoneNumber",phone_number:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkAuthCode",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sendQuery({"@type":"checkAuthenticationCode",code:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"check2FACode",value:function(){var e=Object(u.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sendQuery({"@type":"checkAuthenticationPassword",password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerNewAccount",value:function(){var e=Object(u.a)(c.a.mark((function e(t,n){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.sendQuery({"@type":"registerUser",first_name:t,last_name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),x=n(0);function C(e){return Object(x.jsx)("button",{className:"big-highlighted-button",onClick:e.onClick,children:e.children})}var w=n(16),N=n(17),S=n(19),_=(n(31),n(10)),k=n.n(_),F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={percentage:10},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"loading-spinner",children:Object(x.jsx)(S.a,Object(N.a)(Object(N.a)({percent:this.state.percentage,caps:"round",trackColor:"transparent",spin:"true"},this.props),{},{transitionDuration:"2000"}))})}},{key:"componentDidMount",value:function(){var e=this;this.intervalNum=setInterval((function(){e.setState({percentage:90-e.state.percentage})}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalNum)}}]),n}(s.a.Component);F.props={size:k.a.number.isRequired,lineWidth:k.a.number.isRequired,progressColor:k.a.string.isRequired};var P=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={cState:"connectionStateReady"},e.handleUpdate=function(t){e.setState({cState:t.state["@type"]})},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"connectionState"+(["connectionStateConnecting","connectionStateConnectingToProxy","connectionStateWaitingForNetwork"].includes(this.state.cState)?"":" connected"),children:Object(x.jsx)(F,{progressColor:"gray",size:"20",lineWidth:"2"})})}},{key:"componentDidMount",value:function(){m.registerUpdateHandler("updateConnectionState",this.handleUpdate)}},{key:"componentWillUnmount",value:function(){m.registerUpdateHandler("updateConnectionState",this.handleUpdate)}}]),n}(s.a.Component),A=n(20),E=Object(A.a)((function(){var e=arguments.length>1?arguments[1]:void 0;if("REPLACE_CHAT_FILTERS"==e.type)return e.payload}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());m.registerUpdateHandler("updateChatFilters",(function(e){e.chat_filters&&E.dispatch({type:"REPLACE_CHAT_FILTERS",payload:e.chat_filters})}));var U=E;function T(){return Object(x.jsx)("div",{id:"chat-folders-list",children:Object(x.jsx)("ul",{})})}var z=Object(w.b)((function(e){return{useFolders:0!=(e||[]).length}}))((function(e){return e.useFolders?Object(x.jsxs)("div",{id:"navigation-menu",className:"uses-folders",children:[Object(x.jsx)(T,{}),Object(x.jsx)("div",{id:"chat-list-container",children:Object(x.jsx)(P,{})})]}):Object(x.jsx)("div",{id:"navigation-menu"})}));function D(){return Object(x.jsx)(w.a,{store:U,children:Object(x.jsx)(z,{})})}function L(){return Object(x.jsxs)("div",{id:"messenger-screen",children:[Object(x.jsx)(D,{}),Object(x.jsxs)("div",{id:"chat-container",children:["This is messenger window. You've authenticated successfully!",Object(x.jsx)(C,{onClick:function(){m.sendQuery({"@type":"logOut"})},children:"Log out"})]})]})}var W=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleFocus=function(){a.setState({inactive:!1,titleClass:a.getTitleClass(!0)})},a.handleBlur=function(){a.setState({inactive:!0,mouseX:"50%",titleClass:a.getTitleClass(!1)})},a.handleMouseDown=function(e){a.setState({mouseX:e.nativeEvent.offsetX+"px"})},a.handleKeyDown=function(e){"Enter"==e.key&&a.props.onEnterKeyPressed&&a.props.onEnterKeyPressed()},a.state={inactive:!1,mouseX:"50%",titleClass:a.getTitleClass(a.props.autoFocus)},a}return Object(d.a)(n,[{key:"getTitleClass",value:function(e){return e||this.props.value?"title top":"title placeholder"}},{key:"render",value:function(){var e=this,t="underlined-input";return this.state.inactive&&(t+=" inactive"),this.props.autoFocus&&(t+=" autoFocus"),this.props.invalid&&(t+=" invalid"),Object(x.jsxs)("div",{className:t,style:{"--mouse-left":this.state.mouseX||"50%"},children:[this.props.title?Object(x.jsx)("div",{className:this.state.titleClass,children:this.props.title}):null,Object(x.jsx)("input",{type:this.props.type,onChange:this.props.onChange,value:this.props.value,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,autoFocus:this.props.autoFocus||!1,onKeyDown:this.handleKeyDown,maxLength:this.props.maxLength,onCopy:function(t){e.props.disableCopy&&t.preventDefault()}}),Object(x.jsx)("div",{className:"underline"})]})}}]),n}(s.a.Component),B={"@type":void 0};function R(e){B=e}var I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={step:B},R=function(e){a.setState({step:e})},m.registerUpdateHandler("updateAuthorizationState",(function(e){var t=e.authorization_state;["authorizationStateWaitPhoneNumber","authorizationStateWaitCode","authorizationStateWaitPassword","authorizationStateWaitRegistration","authorizationStateReady","authorizationStateClosed"].includes(t["@type"])&&a.setState({step:t})})),a}return Object(d.a)(n,[{key:"render",value:function(){switch(this.state.step["@type"]){case"authorizationStateWaitPhoneNumber":return Object(x.jsx)(H,{});case"authorizationStateWaitCode":return Object(x.jsx)(X,{info:this.state.step.code_info});case"authorizationStateWaitPassword":return Object(x.jsx)(K,{info:this.state.step});case"authorizationStateWaitRegistration":return Object(x.jsx)(Q,{});case"authorizationStateReady":return Object(x.jsx)(L,{});case"authorizationStateClosed":return window.location.reload(),Object(x.jsx)("p",{children:"This session is closed. Please wait till DIBgram reloads automatically..."});default:return Object(x.jsx)("p",{children:"Loading..."})}}}]),n}(s.a.Component),H=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={number:""},e.handlePNFieldChange=function(t){e.setState({number:t.target.value})},e.submitNumber=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.givePhoneNumber(e.state.number).catch((function(t){e.setState({textUnderField:t.message})}));case 1:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{id:"auth",className:"auth-step-phoneNumber",children:[Object(x.jsx)("h2",{children:"Your Phone Number"}),Object(x.jsx)("p",{className:"description",children:"Please confirm your country code and enter your mobile phone number."}),Object(x.jsx)(W,{type:"text",value:this.state.number,autoFocus:!0,onChange:this.handlePNFieldChange,onEnterKeyPressed:this.submitNumber}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||Object(x.jsx)("span",{children:"\xa0"})}),Object(x.jsx)(C,{onClick:this.submitNumber,children:"NEXT"}),Object(x.jsx)(P,{})]})}}]),n}(s.a.Component),X=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={code:"",invalid:!1},e.handleCodeFieldChange=function(t){e.setState({code:t.target.value,invalid:!1}),t.target.value.length==e.props.info.type.length&&e.handleContinueButton(t.target.value)},e.handleContinueButton=function(t){"string"!=typeof t&&(t=void 0),(t=t||e.state.code).length==e.props.info.type.length&&g.checkAuthCode(t).catch((function(t){"PHONE_CODE_INVALID"===t.message?e.setState({textUnderField:"You have entered an invalid code.",invalid:!0}):e.setState({textUnderField:t.message,invalid:!0})}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e="authenticationCodeTypeSms"==this.props.info.type["@type"]?Object(x.jsxs)("p",{className:"description",children:["A code was sent ",Object(x.jsx)("strong",{children:"via SMS"})," to your phone number."]}):Object(x.jsxs)("p",{className:"description",children:["A code was sent ",Object(x.jsx)("strong",{children:"via Telegram"})," to your other devices, if you have any connected."]});return Object(x.jsxs)("div",{id:"auth",className:"auth-step-code",children:[Object(x.jsx)("h2",{children:this.props.info.phone_number}),e,Object(x.jsx)(W,{type:"text",value:this.state.code,onChange:this.handleCodeFieldChange,autoFocus:!0,title:"Code",maxLength:this.props.info.type.length,onEnterKeyPressed:this.handleContinueButton,invalid:this.state.invalid}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"NEXT"}),Object(x.jsx)(P,{})]})}}]),n}(s.a.Component),K=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={password:"",invalid:!1},e.handlePasswordFieldChange=function(t){e.setState({password:t.target.value,invalid:!1})},e.handleContinueButton=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.check2FACode(e.state.password).catch((function(t){"PASSWORD_HASH_INVALID"==t.message?e.setState({textUnderField:"You have entered a wrong password.",invalid:!0}):e.setState({textUnderField:t.message,invalid:!0})}));case 1:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{id:"auth",className:"auth-step-password",children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("h2",{children:"Cloud password check"}),Object(x.jsx)("p",{className:"description",children:"Please enter your cloud password."}),Object(x.jsx)(W,{type:"text",value:this.state.password,onChange:this.handlePasswordFieldChange,autoFocus:!0,title:"Your cloud password",onEnterKeyPressed:this.handleContinueButton,disableCopy:!0,invalid:this.state.invalid}),Object(x.jsxs)("div",{className:"hint",children:["Hint: ",this.props.info.password_hint]}),Object(x.jsx)("div",{className:"forgot-password",children:Object(x.jsx)("a",{href:"#",children:"Forgot password?"})}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||Object(x.jsx)("i",{children:"\xa0"})}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"SUBMIT"}),Object(x.jsx)(P,{})]})})}}]),n}(s.a.Component),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={firstName:"",lastName:""},e.handleFirstNameFieldChange=function(t){e.setState({firstName:t.target.value})},e.handleLastNameFieldChange=function(t){e.setState({lastName:t.target.value})},e.handleContinueButton=Object(u.a)(c.a.mark((function t(){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.registerNewAccount(e.state.firstName,e.state.lastName).catch((function(t){e.setState({textUnderField:t.message})}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{id:"auth",className:"auth-step-signup",children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("h2",{children:"Your info"}),Object(x.jsx)("p",{className:"description",children:"Please enter your name and upload a photo."}),Object(x.jsx)(W,{type:"text",value:this.state.firstName,onChange:this.handleFirstNameFieldChange,autoFocus:!0}),Object(x.jsx)(W,{type:"text",value:this.state.lastName,onChange:this.handleLastNameFieldChange}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"SIGN UP"}),Object(x.jsx)(P,{})]})})}}]),n}(s.a.Component);n(32);m.initializeTdLib().then((function(e){R(e)}));var M=function(){return Object(x.jsx)("div",{"data-theme":"classic",id:"app",children:Object(x.jsx)(I,{})})},q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,34)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(M,{})}),document.getElementById("root")),q()}},[[33,1,2]]]);
//# sourceMappingURL=main.77f1dfcb.chunk.js.map