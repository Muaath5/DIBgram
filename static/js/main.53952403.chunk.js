(this.webpackJsonpdibgram=this.webpackJsonpdibgram||[]).push([[0],{34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),r=n(12),i=n.n(r),c=n(2),o=n.n(c),u=n(7),l=n(3),d=n(4),h=n(6),p=n(5),j=n(8),b=n(13),v=n(17),f=n.n(v);Array.prototype.remove=function(e){for(var t=0;t<this.length;t++)this[t]===e&&this.splice(t,1)};Array.prototype.remove;var O=Object(b.a)("tdClient"),m=Object(b.a)("updateHandlers"),y=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"initializeTdLib",value:function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log,Object(j.a)(e,O)[O]=new f.a({useDatabase:!0,onUpdate:function(t){n.log_updates&&console.log("Update: ",t),Object(j.a)(e,m)[m][t["@type"]]&&Object(j.a)(e,m)[m][t["@type"]].forEach((function(e){return e(t)}))}}),t.next=4,e.sendQuery({"@type":"getAuthorizationState"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"registerUpdateHandler",value:function(t,n){void 0===Object(j.a)(e,m)[m][t]&&(Object(j.a)(e,m)[m][t]=[]),Object(j.a)(e,m)[m][t].push(n)}},{key:"unRegisterUpdateHandler",value:function(t,n){void 0!==Object(j.a)(e,m)[m][t]&&Object(j.a)(e,m)[m].remove(n)}},{key:"sendQuery",value:function(t){return{use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log.log_queries&&console.log("Query: ",t),Object(j.a)(e,O)[O].send(t)}}]),e}();Object.defineProperty(y,O,{writable:!0,value:void 0}),Object.defineProperty(y,m,{writable:!0,value:{}}),y.registerUpdateHandler("updateAuthorizationState",(function(e){var t={api_id:3022678,api_hash:"d7b7676a82906a6182f4a5e5e9555673"},n=e.authorization_state;"authorizationStateWaitEncryptionKey"===n["@type"]&&y.sendQuery({"@type":"checkDatabaseEncryptionKey",encryption_key:""}),"authorizationStateWaitTdlibParameters"===n["@type"]&&y.sendQuery({"@type":"setTdlibParameters",parameters:{database_directory:"tdlib",use_message_database:!0,use_secret_chats:!0,api_id:t.api_id,api_hash:t.api_hash,system_language_code:"en",device_model:"Web",application_version:"0.0.1",enable_storage_optimizer:!0,use_test_dc:!1}})}));var g=function(){function e(){Object(l.a)(this,e)}return Object(d.a)(e,null,[{key:"givePhoneNumber",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.sendQuery({"@type":"setAuthenticationPhoneNumber",phone_number:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkAuthCode",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.sendQuery({"@type":"checkAuthenticationCode",code:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"check2FACode",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.sendQuery({"@type":"checkAuthenticationPassword",password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerNewAccount",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.sendQuery({"@type":"registerUser",first_name:t,last_name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),x=n(0);function C(e){return Object(x.jsx)("button",{className:"big-highlighted-button",onClick:e.onClick,children:e.children})}var w=n(15),N=n(16),S=n(19),_=(n(33),n(10)),k=n.n(_),F=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={percentage:10},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"loading-spinner",children:Object(x.jsx)(S.a,Object(N.a)(Object(N.a)({percent:this.state.percentage,caps:"round",trackColor:"transparent",spin:"true"},this.props),{},{transitionDuration:"2000"}))})}},{key:"componentDidMount",value:function(){var e=this;this.intervalNum=setInterval((function(){e.setState({percentage:90-e.state.percentage})}),2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalNum)}}]),n}(s.a.Component);F.props={size:k.a.number.isRequired,lineWidth:k.a.number.isRequired,progressColor:k.a.string.isRequired};var A=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={cState:"connectionStateReady"},e.handleUpdate=function(t){e.setState({cState:t.state["@type"]})},e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{className:"connectionState"+(["connectionStateConnecting","connectionStateConnectingToProxy","connectionStateWaitingForNetwork"].includes(this.state.cState)?"":" connected"),children:Object(x.jsx)(F,{progressColor:"rgb(168, 168, 168)",size:"20",lineWidth:"2"})})}},{key:"componentDidMount",value:function(){y.registerUpdateHandler("updateConnectionState",this.handleUpdate)}},{key:"componentWillUnmount",value:function(){y.registerUpdateHandler("updateConnectionState",this.handleUpdate)}}]),n}(s.a.Component),P=n(20),U=Object(P.a)((function(){var e=arguments.length>1?arguments[1]:void 0;if("REPLACE_CHAT_FILTERS"==e.type)return e.payload}),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());y.registerUpdateHandler("updateChatFilters",(function(e){e.chat_filters&&U.dispatch({type:"REPLACE_CHAT_FILTERS",payload:e.chat_filters})}));var E=U;function z(){return Object(x.jsxs)("button",{id:"hamburger-menu-button",children:[Object(x.jsx)("span",{}),Object(x.jsx)("span",{}),Object(x.jsx)("span",{})]})}function T(){return Object(x.jsx)("ul",{})}var D=Object(w.b)((function(e){return{useFolders:0!=(e||[]).length}}))((function(e){return e.useFolders?Object(x.jsxs)("div",{id:"navigation-menu",className:"uses-folders",children:[Object(x.jsxs)("div",{id:"chat-folders-list",children:[Object(x.jsx)(z,{}),Object(x.jsx)(T,{})]}),Object(x.jsx)("div",{id:"chat-list-container",children:Object(x.jsx)(A,{})})]}):Object(x.jsx)("div",{id:"navigation-menu"})}));function L(){return Object(x.jsx)(w.a,{store:E,children:Object(x.jsx)(D,{})})}function W(){return Object(x.jsxs)("div",{id:"messenger-screen",children:[Object(x.jsx)(L,{}),Object(x.jsxs)("div",{id:"chat-container",children:["This is messenger window. You've authenticated successfully!",Object(x.jsx)(C,{onClick:function(){y.sendQuery({"@type":"logOut"})},children:"Log out"})]})]})}var R=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).handleFocus=function(){a.setState({inactive:!1,titleClass:a.getTitleClass(!0)})},a.handleBlur=function(){a.setState({inactive:!0,mouseX:"50%",titleClass:a.getTitleClass(!1)})},a.handleMouseDown=function(e){a.setState({mouseX:e.nativeEvent.offsetX+"px"})},a.handleKeyDown=function(e){"Enter"==e.key&&a.props.onEnterKeyPressed&&a.props.onEnterKeyPressed()},a.state={inactive:!1,mouseX:"50%",titleClass:a.getTitleClass(a.props.autoFocus)},a}return Object(d.a)(n,[{key:"getTitleClass",value:function(e){return e||this.props.value?"title top":"title placeholder"}},{key:"render",value:function(){var e=this,t="underlined-input";return this.state.inactive&&(t+=" inactive"),this.props.autoFocus&&(t+=" autoFocus"),this.props.invalid&&(t+=" invalid"),Object(x.jsxs)("div",{className:t,style:{"--mouse-left":this.state.mouseX||"50%"},children:[this.props.title?Object(x.jsx)("div",{className:this.state.titleClass,children:this.props.title}):null,Object(x.jsx)("input",{type:this.props.type,onChange:this.props.onChange,value:this.props.value,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,autoFocus:this.props.autoFocus||!1,onKeyDown:this.handleKeyDown,maxLength:this.props.maxLength,onCopy:function(t){e.props.disableCopy&&t.preventDefault()}}),Object(x.jsx)("div",{className:"underline"})]})}}]),n}(s.a.Component),B={"@type":void 0};function H(e){B=e}var I=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={step:B},e.handleAuthStateUpdate=function(t){var n=t.authorization_state;["authorizationStateWaitPhoneNumber","authorizationStateWaitCode","authorizationStateWaitPassword","authorizationStateWaitRegistration","authorizationStateReady","authorizationStateClosed"].includes(n["@type"])&&e.setState({step:n})},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=this;H=function(t){e.setState({step:t})},y.registerUpdateHandler("updateAuthorizationState",this.handleAuthStateUpdate)}},{key:"render",value:function(){switch(this.state.step["@type"]){case"authorizationStateWaitPhoneNumber":return Object(x.jsx)(X,{});case"authorizationStateWaitCode":return Object(x.jsx)(K,{info:this.state.step.code_info});case"authorizationStateWaitPassword":return Object(x.jsx)(Q,{info:this.state.step});case"authorizationStateWaitRegistration":return Object(x.jsx)(M,{});case"authorizationStateReady":return Object(x.jsx)(W,{});case"authorizationStateClosed":return window.location.reload(),Object(x.jsx)("p",{children:"This session is closed. Please wait till DIBgram reloads automatically..."});default:return Object(x.jsx)("p",{children:"Loading..."})}}}]),n}(s.a.Component),X=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={number:""},e.handlePNFieldChange=function(t){e.setState({number:t.target.value})},e.submitNumber=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.givePhoneNumber(e.state.number).catch((function(t){e.setState({textUnderField:t.message})}));case 1:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsxs)("div",{id:"auth",className:"auth-step-phoneNumber",children:[Object(x.jsx)("h2",{children:"Your Phone Number"}),Object(x.jsx)("p",{className:"description",children:"Please confirm your country code and enter your mobile phone number."}),Object(x.jsx)(R,{type:"text",value:this.state.number,autoFocus:!0,onChange:this.handlePNFieldChange,onEnterKeyPressed:this.submitNumber}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||Object(x.jsx)("span",{children:"\xa0"})}),Object(x.jsx)(C,{onClick:this.submitNumber,children:"NEXT"}),Object(x.jsx)(A,{})]})}}]),n}(s.a.Component),K=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={code:"",invalid:!1},e.handleCodeFieldChange=function(t){e.setState({code:t.target.value,invalid:!1}),t.target.value.length==e.props.info.type.length&&e.handleContinueButton(t.target.value)},e.handleContinueButton=function(t){"string"!=typeof t&&(t=void 0),(t=t||e.state.code).length==e.props.info.type.length&&g.checkAuthCode(t).catch((function(t){"PHONE_CODE_INVALID"===t.message?e.setState({textUnderField:"You have entered an invalid code.",invalid:!0}):e.setState({textUnderField:t.message,invalid:!0})}))},e}return Object(d.a)(n,[{key:"render",value:function(){var e="authenticationCodeTypeSms"==this.props.info.type["@type"]?Object(x.jsxs)("p",{className:"description",children:["A code was sent ",Object(x.jsx)("strong",{children:"via SMS"})," to your phone number."]}):Object(x.jsxs)("p",{className:"description",children:["A code was sent ",Object(x.jsx)("strong",{children:"via Telegram"})," to your other devices, if you have any connected."]});return Object(x.jsxs)("div",{id:"auth",className:"auth-step-code",children:[Object(x.jsx)("h2",{children:this.props.info.phone_number}),e,Object(x.jsx)(R,{type:"text",value:this.state.code,onChange:this.handleCodeFieldChange,autoFocus:!0,title:"Code",maxLength:this.props.info.type.length,onEnterKeyPressed:this.handleContinueButton,invalid:this.state.invalid}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"NEXT"}),Object(x.jsx)(A,{})]})}}]),n}(s.a.Component),Q=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={password:"",invalid:!1},e.handlePasswordFieldChange=function(t){e.setState({password:t.target.value,invalid:!1})},e.handleContinueButton=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g.check2FACode(e.state.password).catch((function(t){"PASSWORD_HASH_INVALID"==t.message?e.setState({textUnderField:"You have entered a wrong password.",invalid:!0}):e.setState({textUnderField:t.message,invalid:!0})}));case 1:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{id:"auth",className:"auth-step-password",children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("h2",{children:"Cloud password check"}),Object(x.jsx)("p",{className:"description",children:"Please enter your cloud password."}),Object(x.jsx)(R,{type:"text",value:this.state.password,onChange:this.handlePasswordFieldChange,autoFocus:!0,title:"Your cloud password",onEnterKeyPressed:this.handleContinueButton,disableCopy:!0,invalid:this.state.invalid}),Object(x.jsxs)("div",{className:"hint",children:["Hint: ",this.props.info.password_hint]}),Object(x.jsx)("div",{className:"forgot-password",children:Object(x.jsx)("a",{href:"#",children:"Forgot password?"})}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||Object(x.jsx)("i",{children:"\xa0"})}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"SUBMIT"}),Object(x.jsx)(A,{})]})})}}]),n}(s.a.Component),M=function(e){Object(h.a)(n,e);var t=Object(p.a)(n);function n(){var e;Object(l.a)(this,n);for(var a=arguments.length,s=new Array(a),r=0;r<a;r++)s[r]=arguments[r];return(e=t.call.apply(t,[this].concat(s))).state={firstName:"",lastName:""},e.handleFirstNameFieldChange=function(t){e.setState({firstName:t.target.value})},e.handleLastNameFieldChange=function(t){e.setState({lastName:t.target.value})},e.handleContinueButton=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g.registerNewAccount(e.state.firstName,e.state.lastName).catch((function(t){e.setState({textUnderField:t.message})}));case 2:case"end":return t.stop()}}),t)}))),e}return Object(d.a)(n,[{key:"render",value:function(){return Object(x.jsx)("div",{id:"auth",className:"auth-step-signup",children:Object(x.jsxs)("div",{className:"content",children:[Object(x.jsx)("h2",{children:"Your info"}),Object(x.jsx)("p",{className:"description",children:"Please enter your name and upload a photo."}),Object(x.jsx)(R,{type:"text",value:this.state.firstName,onChange:this.handleFirstNameFieldChange,autoFocus:!0}),Object(x.jsx)(R,{type:"text",value:this.state.lastName,onChange:this.handleLastNameFieldChange}),Object(x.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(x.jsx)(C,{onClick:this.handleContinueButton,children:"SIGN UP"}),Object(x.jsx)(A,{})]})})}}]),n}(s.a.Component);n(34);y.initializeTdLib().then((function(e){H(e)}));var q=function(){return Object(x.jsx)("div",{"data-theme":"classic",id:"app",children:Object(x.jsx)(I,{})})};i.a.render(Object(x.jsx)(s.a.StrictMode,{children:Object(x.jsx)(q,{})}),document.getElementById("root"))}},[[35,1,2]]]);
//# sourceMappingURL=main.53952403.chunk.js.map