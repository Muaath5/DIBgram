(this.webpackJsonpdibgram=this.webpackJsonpdibgram||[]).push([[0],{19:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(2),s=n.n(a),r=n(11),i=n.n(r),c=n(1),o=n.n(c),u=n(5),d=n(3),h=n(4),l=n(7),p=n(6),j=n(8),b=n(10),f=n(12),v=n.n(f);var O=Object(b.a)("tdClient"),m=Object(b.a)("updateHandlers"),x=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"initializeTdLib",value:function(){var t=Object(u.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log,Object(j.a)(e,O)[O]=new v.a({useDatabase:!0,onUpdate:function(t){n.log_updates&&console.log("Update: ",t),Object(j.a)(e,m)[m][t["@type"]]&&Object(j.a)(e,m)[m][t["@type"]].forEach((function(e){return e(t)}))}}),t.next=4,e.sendRequest({"@type":"getAuthorizationState"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"registerUpdateHandler",value:function(t,n){void 0===Object(j.a)(e,m)[m][t]&&(Object(j.a)(e,m)[m][t]=[]),Object(j.a)(e,m)[m][t].push(n)}},{key:"sendRequest",value:function(t){return{use_test_dc:!1,log:{log_updates:!1,log_queries:!1}}.log.log_queries&&console.log("Query: ",t),Object(j.a)(e,O)[O].send(t)}}]),e}();Object.defineProperty(x,O,{writable:!0,value:void 0}),Object.defineProperty(x,m,{writable:!0,value:{}}),x.registerUpdateHandler("updateAuthorizationState",(function(e){var t={api_id:3022678,api_hash:"d7b7676a82906a6182f4a5e5e9555673"},n=e.authorization_state;"authorizationStateWaitEncryptionKey"===n["@type"]&&x.sendRequest({"@type":"checkDatabaseEncryptionKey",encryption_key:""}),"authorizationStateWaitTdlibParameters"===n["@type"]&&x.sendRequest({"@type":"setTdlibParameters",parameters:{database_directory:"tdlib",use_message_database:!0,use_secret_chats:!0,api_id:t.api_id,api_hash:t.api_hash,system_language_code:"en",device_model:"Web",application_version:"0.0.1",enable_storage_optimizer:!0,use_test_dc:!1}})}));var g=function(){function e(){Object(d.a)(this,e)}return Object(h.a)(e,null,[{key:"givePhoneNumber",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendRequest({"@type":"setAuthenticationPhoneNumber",phone_number:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"checkAuthCode",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendRequest({"@type":"checkAuthenticationCode",code:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"check2FACode",value:function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendRequest({"@type":"checkAuthenticationPassword",password:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"registerNewAccount",value:function(){var e=Object(u.a)(o.a.mark((function e(t,n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x.sendRequest({"@type":"registerUser",first_name:t,last_name:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),y=n(0);function C(){return Object(y.jsx)("div",{children:"This is messenger window. You've authenticated successfully!"})}function w(e){return Object(y.jsx)("button",{className:"big-highlighted-button",onClick:e.onClick,children:e.children})}var N=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleFocus=function(){a.setState({inactive:!1}),console.log("focus")},a.handleBlur=function(){a.setState({inactive:!0,mouseX:"50%"})},a.handleMouseDown=function(e){console.log("click"),a.setState({mouseX:e.nativeEvent.offsetX+"px"})},a.state={inactive:!1,mouseX:"50%"},a}return Object(h.a)(n,[{key:"render",value:function(){var e="underlined-input";return this.state.inactive&&(e+=" inactive"),Object(y.jsxs)("div",{className:e,style:{"--mouse-left":this.state.mouseX||"50%"},children:[Object(y.jsx)("input",{type:this.props.type,onChange:this.props.onChange,value:this.props.value,onMouseDown:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur}),Object(y.jsx)("div",{className:"underline"})]})}}]),n}(s.a.Component),S={"@type":void 0};function _(e){S=e}var k=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).state={step:S},_=function(e){a.setState({step:e})},x.registerUpdateHandler("updateAuthorizationState",(function(e){var t=e.authorization_state;["authorizationStateWaitPhoneNumber","authorizationStateWaitCode","authorizationStateWaitPassword","authorizationStateWaitRegistration","authorizationStateReady","authorizationStateClosed"].includes(t["@type"])&&a.setState({step:t})})),a}return Object(h.a)(n,[{key:"render",value:function(){switch(this.state.step["@type"]){case"authorizationStateWaitPhoneNumber":return Object(y.jsx)(F,{});case"authorizationStateWaitCode":return Object(y.jsx)(P,{info:this.state.step.code_info});case"authorizationStateWaitPassword":return Object(y.jsx)(z,{info:this.state.step});case"authorizationStateWaitRegistration":return Object(y.jsx)(U,{});case"authorizationStateReady":return Object(y.jsx)(C,{});case"authorizationStateClosed":return Object(y.jsx)("p",{children:"This session is closed."});default:return Object(y.jsx)("p",{children:"Loading..."})}}}]),n}(s.a.Component),F=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handlePNFieldChange=function(e){a.setState({number:e.target.value})},a.handleContinueButton=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.givePhoneNumber(a.state.number).catch((function(e){a.setState({textUnderField:e.message})}));case 1:case"end":return e.stop()}}),e)}))),a.state={number:""},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(y.jsxs)("div",{id:"auth",className:"auth-step-phoneNumber",children:[Object(y.jsx)("h2",{children:"Your Phone Number"}),Object(y.jsx)("p",{className:"description",children:"Please confirm your country code and enter your mobile phone number."}),Object(y.jsx)(N,{type:"text",value:this.state.number,onChange:this.handlePNFieldChange}),Object(y.jsx)("div",{className:"status",children:this.state.textUnderField||Object(y.jsx)("span",{children:"\xa0"})}),Object(y.jsx)(w,{onClick:this.handleContinueButton,children:"NEXT"})]})}}]),n}(s.a.Component),P=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleCodeFieldChange=function(e){a.setState({code:e.target.value})},a.handleContinueButton=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.checkAuthCode(a.state.code).catch((function(e){"PHONE_CODE_INVALID"===e.message?a.setState({textUnderField:"Code is invalid"}):a.setState({textUnderField:e.message})}));case 1:case"end":return e.stop()}}),e)}))),a.state={code:""},a}return Object(h.a)(n,[{key:"render",value:function(){var e="authenticationCodeTypeSms"==this.props.info.type["@type"]?Object(y.jsx)("p",{className:"description",children:"Please enter the verification code you received as SMS:"}):Object(y.jsxs)("p",{className:"description",children:["A code was sent ",Object(y.jsx)("b",{children:"via Telegram"})," to your other devices, if you have any connected."]});return Object(y.jsxs)("div",{id:"auth",className:"auth-state-code",children:[Object(y.jsx)("h2",{children:this.props.info.phone_number}),e,Object(y.jsx)(N,{type:"text",value:this.state.code,onChange:this.handleCodeFieldChange}),Object(y.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(y.jsx)(w,{onClick:this.handleContinueButton,children:"NEXT"})]})}}]),n}(s.a.Component),z=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handlePasswordFieldChange=function(e){a.setState({password:e.target.value})},a.handleContinueButton=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:g.check2FACode(a.state.password).catch((function(e){"PASSWORD_HASH_INVALID"==e.message?a.setState({textUnderField:"You have entered a wrong password."}):a.setState({textUnderField:e.message})}));case 1:case"end":return e.stop()}}),e)}))),a.state={password:""},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{id:"auth",className:"auth-state-password",children:Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("h2",{children:"Cloud password check"}),Object(y.jsx)("p",{className:"description",children:"Please enter your cloud password."}),Object(y.jsx)(N,{type:"text",value:this.state.password,onChange:this.handlePasswordFieldChange}),Object(y.jsxs)("div",{className:"hint",children:["Hint: ",this.props.info.password_hint]}),Object(y.jsx)("div",{className:"forgot-password",children:Object(y.jsx)("a",{href:"#",children:"Forgot password?"})}),Object(y.jsx)("div",{className:"status",children:this.state.textUnderField||Object(y.jsx)("i",{children:"\xa0"})}),Object(y.jsx)(w,{onClick:this.handleContinueButton,children:"SUBMIT"})]})})}}]),n}(s.a.Component),U=function(e){Object(l.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(d.a)(this,n),(a=t.call(this,e)).handleFirstNameFieldChange=function(e){a.setState({firstName:e.target.value})},a.handleLastNameFieldChange=function(e){a.setState({lastName:e.target.value})},a.handleContinueButton=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.registerNewAccount(a.state.firstName,a.state.lastName).catch((function(e){a.setState({textUnderField:e.message})}));case 2:case"end":return e.stop()}}),e)}))),a.state={firstName:"",lastName:""},a}return Object(h.a)(n,[{key:"render",value:function(){return Object(y.jsx)("div",{id:"auth",className:"auth-state-signup",children:Object(y.jsxs)("div",{className:"content",children:[Object(y.jsx)("h2",{children:"Your info"}),Object(y.jsx)("p",{className:"description",children:"Please enter your name and upload a photo."}),Object(y.jsx)(N,{type:"text",value:this.state.firstName,onChange:this.handleFirstNameFieldChange}),Object(y.jsx)(N,{type:"text",value:this.state.lastName,onChange:this.handleLastNameFieldChange}),Object(y.jsx)("div",{className:"status",children:this.state.textUnderField||""}),Object(y.jsx)(w,{onClick:this.handleContinueButton,children:"SIGN UP"})]})})}}]),n}(s.a.Component);n(19);x.initializeTdLib().then((function(e){_(e)}));var A=function(){return Object(y.jsx)("div",{"data-theme":"classic",id:"app",children:Object(y.jsx)(k,{})})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,i=t.getTTFB;n(e),a(e),s(e),r(e),i(e)}))};i.a.render(Object(y.jsx)(s.a.StrictMode,{children:Object(y.jsx)(A,{})}),document.getElementById("root")),B()}},[[20,1,2]]]);
//# sourceMappingURL=main.766ce29a.chunk.js.map